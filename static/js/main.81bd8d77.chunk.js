(window["webpackJsonptypescript-react-example"]=window["webpackJsonptypescript-react-example"]||[]).push([[0],{177:function(e,t,a){e.exports=a(351)},350:function(e,t,a){},351:function(e,t,a){"use strict";a.r(t);var r,n,i,o,c,l,s,u,m,p,b,h,f,v,d,g,E,j,O,w,k,y,S,x,z,_,C=a(0),P=a.n(C),I=a(23),T=a.n(I),Y=a(19),A=a(4),U=a(17),F=a.n(U),N=a(166),D=a(31),M=a(10),J=a(145),V=a(11),G=(a(46),a(167)),L=(r=A.e.ref,n=A.e.ref,i=function(){function e(t){var a=this;Object(Y.a)(this,e),this.rootStore=void 0,Object(M.a)(this,"events",o,this),Object(M.a)(this,"grupedEvents",c,this),Object(M.a)(this,"processedEvents",l,this),Object(M.a)(this,"ignoredFileds",s,this),Object(M.a)(this,"params",u,this),Object(M.a)(this,"addParam",m,this),Object(M.a)(this,"removeParam",p,this),Object(M.a)(this,"setParamName",b,this),Object(M.a)(this,"setParamValue",h,this),Object(M.a)(this,"getEvents",f,this),this.loadEvents=Object(D.a)(F.a.mark(function e(){var t,r,n,i;return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=a.processParams(),n=a.rootStore.userStore.user.id;case 3:return e.next=6,a.rootStore.apiStore.api.Users.events(n,r);case 6:if(0!==(i=e.sent).length){e.next=9;break}return e.abrupt("break",13);case 9:r.page+=1,t.push.apply(t,Object(N.a)(i)),e.next=3;break;case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}},e)})),Object(M.a)(this,"processEvents",v,this),this.rootStore=t}return Object(J.a)(e,[{key:"processParams",value:function(){var e={},t=!0,a=!1,r=void 0;try{for(var n,i=this.params[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value;o.name&&(e[o.name]=o.value)}}catch(c){a=!0,r=c}finally{try{t||null==i.return||i.return()}finally{if(a)throw r}}return e.perPage=50,e.page=1,e}}]),e}(),o=Object(V.a)(i.prototype,"events",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=Object(V.a)(i.prototype,"grupedEvents",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),l=Object(V.a)(i.prototype,"processedEvents",[A.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=Object(V.a)(i.prototype,"ignoredFileds",[A.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return["author","author_username","author_id","commit_count","commit_from","commit_to","project_id","target_id","target_iid","position"]}}),u=Object(V.a)(i.prototype,"params",[A.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{name:"after",value:"2020-8-31"}]}}),m=Object(V.a)(i.prototype,"addParam",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.params.push({name:"",value:""})}}}),p=Object(V.a)(i.prototype,"removeParam",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.params.splice(t,1)}}}),b=Object(V.a)(i.prototype,"setParamName",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){e.params[a].name=t}}}),h=Object(V.a)(i.prototype,"setParamValue",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){e.params[a].value=t}}}),f=Object(V.a)(i.prototype,"getEvents",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(D.a)(F.a.mark(function t(){var a;return F.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.loadEvents();case 3:a=t.sent,Object(A.g)(function(){e.events=a}),e.processEvents(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}))}}),v=Object(V.a)(i.prototype,"processEvents",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t={},a=Object(G.a)(e.events,function(e){return e.created_at.split("T")[0]});for(var r in a){t[r]=[];for(var n=0;n<a[r].length;n++)t[r].push(a[r][n])}Object(A.g)(function(){e.grupedEvents=t})}}}),i),B=a(146),H=(d=function e(t){var a=this;Object(Y.a)(this,e),this.rootStore=void 0,Object(M.a)(this,"token",g,this),Object(M.a)(this,"api",E,this),Object(M.a)(this,"setToken",j,this),Object(M.a)(this,"createApi",O,this),this.rootStore=t,Object(A.f)(function(){return a.token},function(e){e?window.localStorage.setItem("token",e):window.localStorage.removeItem("token")})},g=Object(V.a)(d.prototype,"token",[A.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return window.localStorage.getItem("token")}}),E=Object(V.a)(d.prototype,"api",[A.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=Object(V.a)(d.prototype,"setToken",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.token=t}}}),O=Object(V.a)(d.prototype,"createApi",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(D.a)(F.a.mark(function t(){return F.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.api=new B.Gitlab({host:"https://gitlab.webix.de/",token:e.token});case 1:case"end":return t.stop()}},t)}))}}),d),R=(w=function e(t){Object(Y.a)(this,e),this.rootStore=void 0,Object(M.a)(this,"user",k,this),Object(M.a)(this,"err",y,this),Object(M.a)(this,"getUser",S,this),this.rootStore=t},k=Object(V.a)(w.prototype,"user",[A.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=Object(V.a)(w.prototype,"err",[A.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=Object(V.a)(w.prototype,"getUser",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(D.a)(F.a.mark(function t(){var a;return F.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.rootStore.apiStore.api.Users.current();case 3:a=t.sent,Object(A.g)(function(){e.user=a,e.err=null}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),Object(A.g)(function(){e.user=null,e.err="Token is not valid"}),console.log(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,7]])}))}}),w),q=(x=function e(t){Object(Y.a)(this,e),this.rootStore=void 0,Object(M.a)(this,"ticket",z,this),Object(M.a)(this,"setTicket",_,this),this.rootStore=t},z=Object(V.a)(x.prototype,"ticket",[A.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_=Object(V.a)(x.prototype,"setTicket",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.ticket=t}}}),x);Object(A.c)({enforceActions:"always"});var K=Object(C.createContext)(new function e(){Object(Y.a)(this,e),this.eventStore=void 0,this.apiStore=void 0,this.userStore=void 0,this.jiraStore=void 0,this.eventStore=new L(this),this.apiStore=new H(this),this.userStore=new R(this),this.jiraStore=new q(this)}),Q=a(366),W=a(367),X=a(362),Z=Object(Q.a)(function(){var e=Object(C.useContext)(K),t=e.apiStore,a=t.setToken,r=t.createApi,n=t.token,i=e.userStore,o=i.getUser,c=i.err,l=i.user;return P.a.createElement(P.a.Fragment,null,P.a.createElement(W.a,null,"Create read_api token here: ",P.a.createElement("a",{href:"https://gitlab.webix.de/profile/personal_access_tokens"},"wwww.gitlab.webix.de/profile/personal_access_tokens")),P.a.createElement(X.a,{icon:"key",iconPosition:"left",placeholder:"Your token",onChange:function(e){return a(e.target.value)},value:n,action:{icon:"check",color:null==l?"red":"green",onClick:function(){r(),o()}}}),c&&P.a.createElement(W.a,{negative:!0},P.a.createElement("p",null,c)))}),$=Object(Q.a)(function(){var e=Object(C.useContext)(K).userStore.user;return P.a.createElement(P.a.Fragment,null,e&&e.name)}),ee=a(365),te=a(352),ae=Object(Q.a)(function(){var e=Object(C.useContext)(K),t=e.userStore.user,a=e.eventStore,r=a.params,n=a.setParamName,i=a.setParamValue,o=a.addParam,c=a.getEvents;return P.a.createElement(P.a.Fragment,null,P.a.createElement(W.a,null,"All parameters: ",P.a.createElement("a",{href:"https://docs.gitlab.com/ee/api/events.html#list-currently-authenticated-users-events"},"www.docs.gitlab.com/ee/api/events.html#list-currently-authenticated-users-events")),P.a.createElement(ee.a,null,P.a.createElement(ee.a.Item,null,r.map(function(e,t){return P.a.createElement("div",{key:t},P.a.createElement(X.a,{placeholder:"prop name",value:e.name,onChange:function(e){return n(e.target.value,t)}}),P.a.createElement(X.a,{placeholder:"prop value",value:e.value,onChange:function(e){return i(e.target.value,t)}}))})),P.a.createElement(ee.a.Item,null,P.a.createElement(te.a,{onClick:o},"Add Param"),t&&P.a.createElement(te.a,{onClick:c},"Submite"))))}),re=a(364),ne=a(374),ie=a(373),oe=a(372),ce=a(371),le=a(370),se=a(369),ue=a(320),me=a(328),pe=ue.Link,be=ue.Element,he=Object(Q.a)(function(){var e=Object(C.useContext)(K),t=e.eventStore,a=t.events,r=t.grupedEvents,n=(t.ignoredFileds,e.jiraStore),i=n.ticket,o=n.setTicket,c=function(e){var t=[];return t.push(P.a.createElement("p",null,function(e){var t=new Date(e),a=t.setTime(t.getTime()+60*t.getTimezoneOffset()*1e3);return me(a).format("H:mm")}(e.created_at))),e.push_data?(t.push(P.a.createElement("p",null,e.action_name," ",e.push_data.ref_type)),t.push(P.a.createElement("p",null,e.push_data.ref))):e.note?(console.log(e),t.push(P.a.createElement("p",null,e.action_name)),t.push(P.a.createElement("p",null,e.target_title))):(t.push(P.a.createElement("p",null,e.action_name," ",e.target_type)),t.push(P.a.createElement("p",null,e.target_title))),t};return P.a.createElement(P.a.Fragment,null,P.a.createElement("nav",{className:"vertical-nav"},P.a.createElement("ul",null,P.a.createElement("li",null,P.a.createElement(X.a,{placeholder:"Jira ticket number",onChange:function(e){return o(e.target.value)},value:i,action:{icon:"external",onClick:function(){window.open("https://jira.smart-digital.de/browse/SMAR-"+i,"_blank")}}}))),P.a.createElement("ul",{style:{float:"right"}},Object.keys(r).map(function(e,t){return P.a.createElement("li",{key:t},P.a.createElement(pe,{activeClass:"active",to:e,spy:!0,smooth:!0,duration:250},me(e).format("DD. MM. YYYY")))}))),a&&P.a.createElement(re.a,{className:"timeline"},Object.keys(r).map(function(e,t){return P.a.createElement(be,{name:e,className:"element big"},function(e){var t=[];return t.push(P.a.createElement(re.a.Item,{dot:P.a.createElement(ne.a,{translate:!0,style:{fontSize:"18px"}}),color:"red"},P.a.createElement("h2",null,me(e).format("DD. MM. YYYY (dd)")))),t.push(r[e].map(function(e,t){var a=c(e);switch(e.action_name){case"commented on":return P.a.createElement(re.a.Item,{dot:P.a.createElement(ie.a,{translate:!0,style:{fontSize:"18px"}}),color:"green"},a);case"deleted":return P.a.createElement(re.a.Item,{dot:P.a.createElement(oe.a,{translate:!0,style:{fontSize:"18px",color:"gray"}})},a);case"closed":return P.a.createElement(re.a.Item,{dot:P.a.createElement(ce.a,{translate:!0,style:{fontSize:"18px",color:"red"}})},a);case"opened":return P.a.createElement(re.a.Item,{dot:P.a.createElement(le.a,{translate:!0,style:{fontSize:"18px",color:"green"}})},a);case"accepted":return P.a.createElement(re.a.Item,{dot:P.a.createElement(se.a,{translate:!0,style:{fontSize:"18px",color:"blue"}})},a);default:return P.a.createElement(re.a.Item,null,a)}})),t}(e))})))}),fe=a(363),ve=function(){var e=Object(C.useContext)(K),t=e.apiStore,a=t.token,r=t.createApi,n=e.userStore.getUser;return Object(C.useEffect)(function(){a&&(console.log(a),r(),n())},[n,r,a]),P.a.createElement(fe.a,null,P.a.createElement("h3",null,"GitLab User Token:"),P.a.createElement(Z,null),P.a.createElement("h3",null,"User:"),P.a.createElement($,null),P.a.createElement("h3",null,"Event filter:"),P.a.createElement(ae,null),P.a.createElement("h3",null,"Events:"),P.a.createElement(he,null))};a(348),a(349),a(350);T.a.render(P.a.createElement(ve,null),document.getElementById("root"))}},[[177,1,2]]]);
//# sourceMappingURL=main.81bd8d77.chunk.js.map