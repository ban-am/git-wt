(window["webpackJsonptypescript-react-example"]=window["webpackJsonptypescript-react-example"]||[]).push([[0],{240:function(e,t,a){e.exports=a(446)},445:function(e,t,a){},446:function(e,t,a){"use strict";a.r(t);var r,n,i,l,o,c,s,u,m,p,b,f,h,v,d,g,E,O,j,y,w,k,S,x,z,_,C,P,T=a(0),I=a.n(T),Y=a(11),M=a.n(Y),U=a(59),A=a(7),D=a(44),L=a.n(D),F=a(228),N=a(63),R=a(14),V=a(195),G=a(15),J=(a(117),a(231)),B=a(156),H=(r=A.e.ref,n=A.e.ref,i=function(){function e(t){var a=this;Object(U.a)(this,e),this.rootStore=void 0,Object(R.a)(this,"events",l,this),Object(R.a)(this,"grupedEvents",o,this),Object(R.a)(this,"processedEvents",c,this),Object(R.a)(this,"ignoredFileds",s,this),Object(R.a)(this,"regex",u,this),Object(R.a)(this,"getLastDayOfMonth",m,this),Object(R.a)(this,"params",p,this),Object(R.a)(this,"addParam",b,this),Object(R.a)(this,"setRegex",f,this),Object(R.a)(this,"createLink",h,this),Object(R.a)(this,"removeParam",v,this),Object(R.a)(this,"setParamName",d,this),Object(R.a)(this,"setParamValue",g,this),Object(R.a)(this,"getEvents",E,this),this.loadEvents=Object(N.a)(L.a.mark(function e(){var t,r,n,i;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=a.processParams(),n=a.rootStore.userStore.user.id;case 3:return e.next=6,a.rootStore.apiStore.api.Users.events(n,r);case 6:if(0!==(i=e.sent).length){e.next=9;break}return e.abrupt("break",13);case 9:r.page+=1,t.push.apply(t,Object(F.a)(i)),e.next=3;break;case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}},e)})),Object(R.a)(this,"processEvents",O,this),this.rootStore=t}return Object(V.a)(e,[{key:"processParams",value:function(){var e={},t=!0,a=!1,r=void 0;try{for(var n,i=this.params[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var l=n.value;l.name&&(e[l.name]=l.value)}}catch(o){a=!0,r=o}finally{try{t||null==i.return||i.return()}finally{if(a)throw r}}return e.perPage=50,e.page=1,e}}]),e}(),l=Object(G.a)(i.prototype,"events",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=Object(G.a)(i.prototype,"grupedEvents",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),c=Object(G.a)(i.prototype,"processedEvents",[A.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=Object(G.a)(i.prototype,"ignoredFileds",[A.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return["author","author_username","author_id","commit_count","commit_from","commit_to","project_id","target_id","target_iid","position"]}}),u=Object(G.a)(i.prototype,"regex",[A.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"SMAR.[\\d]+"}}),m=Object(G.a)(i.prototype,"getLastDayOfMonth",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=new Date,t=e.getMonth()-1;t<0&&(t+=12,e.setFullYear(e.getFullYear()-1)),e.setMonth(t);var a=B(e);return a.format("YYYY-MM")+"-"+a.daysInMonth()}}}),p=Object(G.a)(i.prototype,"params",[A.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{name:"after",value:this.getLastDayOfMonth()}]}}),b=Object(G.a)(i.prototype,"addParam",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.params.push({name:"",value:""})}}}),f=Object(G.a)(i.prototype,"setRegex",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.regex=t}}}),h=Object(G.a)(i.prototype,"createLink",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t.match(e.regex),r=void 0;return a&&(r="https://jira.smart-digital.de/browse/"+a[0]),r}}}),v=Object(G.a)(i.prototype,"removeParam",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.params.splice(t,1)}}}),d=Object(G.a)(i.prototype,"setParamName",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){e.params[a].name=t}}}),g=Object(G.a)(i.prototype,"setParamValue",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){e.params[a].value=t}}}),E=Object(G.a)(i.prototype,"getEvents",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(N.a)(L.a.mark(function t(){var a;return L.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.rootStore.userStore.user){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.loadEvents();case 5:a=t.sent,Object(A.g)(function(){e.events=a}),e.processEvents(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0);case 13:case"end":return t.stop()}},t,null,[[2,10]])}))}}),O=Object(G.a)(i.prototype,"processEvents",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t={},a=Object(J.a)(e.events,function(e){return e.created_at.split("T")[0]});for(var r in a){t[r]=[];for(var n=0;n<a[r].length;n++)t[r].push(a[r][n])}Object(A.g)(function(){e.grupedEvents=t})}}}),i),W=a(196),q=(j=function e(t){var a=this;Object(U.a)(this,e),this.rootStore=void 0,Object(R.a)(this,"token",y,this),Object(R.a)(this,"api",w,this),Object(R.a)(this,"setToken",k,this),Object(R.a)(this,"createApi",S,this),this.rootStore=t,Object(A.f)(function(){return a.token},function(e){e?window.localStorage.setItem("token",e):window.localStorage.removeItem("token")})},y=Object(G.a)(j.prototype,"token",[A.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return window.localStorage.getItem("token")}}),w=Object(G.a)(j.prototype,"api",[A.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=Object(G.a)(j.prototype,"setToken",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.token=t}}}),S=Object(G.a)(j.prototype,"createApi",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(N.a)(L.a.mark(function t(){return L.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.api=new W.Gitlab({host:"https://gitlab.webix.de/",token:e.token});case 1:case"end":return t.stop()}},t)}))}}),j),K=(x=function e(t){Object(U.a)(this,e),this.rootStore=void 0,Object(R.a)(this,"user",z,this),Object(R.a)(this,"err",_,this),Object(R.a)(this,"loadingUser",C,this),Object(R.a)(this,"getUser",P,this),this.rootStore=t},z=Object(G.a)(x.prototype,"user",[A.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=Object(G.a)(x.prototype,"err",[A.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=Object(G.a)(x.prototype,"loadingUser",[A.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=Object(G.a)(x.prototype,"getUser",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(N.a)(L.a.mark(function t(){var a;return L.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loadingUser=!0,t.next=4,e.rootStore.apiStore.api.Users.current();case 4:a=t.sent,Object(A.g)(function(){e.user=a,e.loadingUser=!1,e.err=null}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),Object(A.g)(function(){e.user=null,e.loadingUser=!1,e.err="Token is not valid"}),console.log(t.t0);case 12:case"end":return t.stop()}},t,null,[[0,8]])}))}}),x);Object(A.c)({enforceActions:"always"});var Q=Object(T.createContext)(new function e(){Object(U.a)(this,e),this.eventStore=void 0,this.apiStore=void 0,this.userStore=void 0,this.eventStore=new H(this),this.apiStore=new q(this),this.userStore=new K(this)}),X=a(455),Z=a(459),$=a(460),ee=a(461),te=a(454),ae=a(152),re=a(456),ne=a(151),ie=a(452),le=te.a.Title,oe=Object(X.a)(function(){var e=Object(T.useContext)(Q),t=e.apiStore,a=t.setToken,r=t.createApi,n=t.token,i=e.userStore,l=i.getUser,o=i.loadingUser,c=i.user;return I.a.createElement(ie.a,null,I.a.createElement(le,{level:4},"GitLab User Token "," ",I.a.createElement(ae.a,{title:I.a.createElement("p",null,"Create read_api token here: ",I.a.createElement("a",{href:"https://gitlab.webix.de/profile/personal_access_tokens"},"wwww.gitlab.webix.de/profile/personal_access_tokens")),overlayStyle:{fontSize:"14px"}},I.a.createElement(Z.a,{translate:!0,style:{color:"#ff4d4f",fontSize:"16px"}}))),I.a.createElement(re.a.Group,{compact:!0,style:{width:"35%"}},I.a.createElement(re.a,{placeholder:"Your token",onChange:function(e){return a(e.target.value)},value:n,style:{width:"90%"}}),I.a.createElement(ne.a,{type:"primary",danger:!c,loading:o,icon:c?I.a.createElement($.a,{translate:!0}):I.a.createElement(ee.a,{translate:!0}),style:{width:"10%"},onClick:function(){r(),l()}})))}),ce=Object(X.a)(function(){var e=Object(T.useContext)(Q).userStore.user;return I.a.createElement(I.a.Fragment,null,e&&e.name)}),se=a(453),ue=a(462),me=a(458),pe=te.a.Title,be=Object(X.a)(function(){var e=Object(T.useContext)(Q).eventStore,t=e.params,a=e.setParamName,r=e.setParamValue,n=e.addParam,i=e.getEvents,l=e.removeParam;return I.a.createElement(I.a.Fragment,null,I.a.createElement(pe,{level:4},"Event filter "," ",I.a.createElement(ae.a,{title:I.a.createElement("p",null,"All parameters: ",I.a.createElement("a",{href:"https://docs.gitlab.com/ee/api/events.html#list-currently-authenticated-users-events"},"www.docs.gitlab.com/ee/api/events.html#list-currently-authenticated-users-events")),overlayStyle:{fontSize:"14px"}},I.a.createElement(Z.a,{translate:!0,style:{color:"#ff4d4f",fontSize:"16px"}}))),I.a.createElement(se.a,null,I.a.createElement(se.a.Item,null,t.map(function(e,t){return I.a.createElement("div",{key:t},I.a.createElement(me.b,null,I.a.createElement(re.a.Group,null,I.a.createElement(re.a,{placeholder:"prop name",defaultValue:e.name,onChange:function(e){return a(e.target.value,t)},style:{width:"45%"}}),I.a.createElement(re.a,{placeholder:"prop value",value:e.value,onChange:function(e){return r(e.target.value,t)},style:{width:"45%"}}),I.a.createElement(ne.a,{type:"text",icon:I.a.createElement(ue.a,{translate:!0}),style:{width:"10%"},onClick:function(){return l(t)}}))))})),I.a.createElement(se.a.Item,null,I.a.createElement(me.b,null,I.a.createElement(ne.a,{onClick:n},"Add props"),I.a.createElement(ne.a,{onClick:i,type:"primary"},"Submit")))))}),fe=a(457),he=a(463),ve=a(464),de=a(465),ge=a(466),Ee=a(467),Oe=a(468),je=a(469),ye=te.a.Title,we=a(435),ke=a(156),Se=we.Link,xe=we.Element,ze=Object(X.a)(function(){var e=Object(T.useContext)(Q).eventStore,t=e.events,a=e.grupedEvents,r=e.createLink,n=function(e){var t=[];if(t.push(I.a.createElement("p",null,function(e){var t=new Date(e),a=t.setTime(t.getTime()+60*t.getTimezoneOffset()*1e3);return ke(a).format("H:mm")}(e.created_at))),e.push_data){t.push(I.a.createElement("p",null,e.action_name," ",e.push_data.ref_type));var a=r(e.push_data.ref);t.push(I.a.createElement("p",null,e.push_data.ref," ",a&&I.a.createElement(ne.a,{title:a,type:"link",href:a,target:"_blank",icon:I.a.createElement(he.a,{translate:!0})})))}else if(e.note){console.log(e),t.push(I.a.createElement("p",null,e.action_name));a=r(e.target_title);t.push(I.a.createElement("p",null,e.target_title," ",a&&I.a.createElement(ne.a,{title:a,type:"link",href:a,target:"_blank",icon:I.a.createElement(he.a,{translate:!0})})))}else{t.push(I.a.createElement("p",null,e.action_name," ",e.target_type));a=r(e.target_title);t.push(I.a.createElement("p",null,e.target_title," ",a&&I.a.createElement(ne.a,{title:a,type:"link",href:a,target:"_blank",icon:I.a.createElement(he.a,{translate:!0})})))}return t};return I.a.createElement(I.a.Fragment,null,I.a.createElement(ye,{level:4},"Events"),I.a.createElement("nav",{className:"vertical-nav"},I.a.createElement("ul",null,I.a.createElement("li",null,I.a.createElement(re.a.Search,{size:"large",placeholder:"Jira ticket number",enterButton:!0,onSearch:function(e){e&&window.open("https://jira.smart-digital.de/browse/SMAR-"+e,"_blank")},style:{width:200}}))),I.a.createElement("ul",{style:{float:"right"},className:"timeLineItem"},Object.keys(a).map(function(e,t){return I.a.createElement("li",{key:t},I.a.createElement(Se,{activeClass:"active",to:e,spy:!0,smooth:!0,duration:250},ke(e).format("DD. MM. YYYY")))}))),t&&I.a.createElement(fe.a,{className:"timeline"},Object.keys(a).map(function(e,t){return I.a.createElement(xe,{name:e,className:"element big"},function(e){var t=[];return t.push(I.a.createElement(fe.a.Item,{dot:I.a.createElement(ve.a,{translate:!0,style:{fontSize:"18px"}}),color:"red"},I.a.createElement("h2",null,ke(e).format("DD. MM. YYYY (dd)")))),t.push(a[e].map(function(e,t){var a=n(e);switch(e.action_name){case"commented on":return I.a.createElement(fe.a.Item,{dot:I.a.createElement(de.a,{translate:!0,style:{fontSize:"18px"}}),color:"green"},a);case"deleted":return I.a.createElement(fe.a.Item,{dot:I.a.createElement(ge.a,{translate:!0,style:{fontSize:"18px",color:"gray"}})},a);case"closed":return I.a.createElement(fe.a.Item,{dot:I.a.createElement(Ee.a,{translate:!0,style:{fontSize:"18px",color:"red"}})},a);case"opened":return I.a.createElement(fe.a.Item,{dot:I.a.createElement(Oe.a,{translate:!0,style:{fontSize:"18px",color:"green"}})},a);case"accepted":return I.a.createElement(fe.a.Item,{dot:I.a.createElement(je.a,{translate:!0,style:{fontSize:"18px",color:"blue"}})},a);default:return I.a.createElement(fe.a.Item,null,a)}})),t}(e))})))}),_e=a(470),Ce=te.a.Title,Pe=Object(X.a)(function(){var e=Object(T.useContext)(Q).eventStore,t=e.regex,a=e.setRegex;return I.a.createElement(I.a.Fragment,null,I.a.createElement(Ce,{level:4},"Task Parser"),I.a.createElement(re.a,{placeholder:"prop name",defaultValue:t.toString(),style:{width:"15%"},onChange:function(e){return a(e.target.value)}}))}),Te=te.a.Title,Ie=function(){var e=Object(T.useContext)(Q),t=e.apiStore,a=t.token,r=t.createApi,n=e.userStore.getUser;return Object(T.useEffect)(function(){a&&(console.log(a),r(),n())},[n,r,a]),I.a.createElement(ie.a,null,I.a.createElement("div",{className:"home-page"},I.a.createElement(Te,{style:{fontSize:"62px"}},I.a.createElement(_e.a,{translate:!0,style:{fontSize:"72px"}})," WT")),I.a.createElement(me.b,{direction:"vertical"},I.a.createElement(oe,null),I.a.createElement(ce,null),I.a.createElement(be,null),I.a.createElement(Pe,null),I.a.createElement(ze,null)))};a(443),a(444),a(445);M.a.render(I.a.createElement(Ie,null),document.getElementById("root"))}},[[240,1,2]]]);
//# sourceMappingURL=main.bd66f18f.chunk.js.map