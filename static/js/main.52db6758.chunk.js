(window["webpackJsonptypescript-react-example"]=window["webpackJsonptypescript-react-example"]||[]).push([[0],{287:function(e,t,r){e.exports=r(659)},345:function(e,t){},347:function(e,t){},379:function(e,t){},380:function(e,t){},448:function(e,t){},659:function(e,t,r){"use strict";r.r(t);var a,n,i,o,c,s,u,l,b,p,m,f,h,v,j,O,g,w,d,E,y,k,S,x,z,P,C,U=r(0),J=r.n(U),A=r(53),F=r.n(A),I=r(35),T=r(6),_=r(27),N=r.n(_),V=r(276),L=r(41),G=r(13),B=r(265),Y=r(14),q=(r(86),r(277)),D=(a=function(){function e(t){var r=this;Object(I.a)(this,e),this.rootStore=void 0,Object(G.a)(this,"events",n,this),Object(G.a)(this,"grupedEvents",i,this),Object(G.a)(this,"processedEvents",o,this),Object(G.a)(this,"params",c,this),Object(G.a)(this,"addParam",s,this),Object(G.a)(this,"removeParam",u,this),Object(G.a)(this,"setParamName",l,this),Object(G.a)(this,"setParamValue",b,this),Object(G.a)(this,"getEvents",p,this),this.loadEvents=Object(L.a)(N.a.mark(function e(){var t,a,n,i;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=[],a=r.processParams(),n=r.rootStore.userStore.user.id;case 3:return e.next=6,r.rootStore.apiStore.api.Users.events(n,a);case 6:if(0!=(i=e.sent).length){e.next=9;break}return e.abrupt("break",13);case 9:a.page+=1,t.push.apply(t,Object(V.a)(i)),e.next=3;break;case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}},e)})),Object(G.a)(this,"processEvents",m,this),this.rootStore=t}return Object(B.a)(e,[{key:"processParams",value:function(){var e={},t=!0,r=!1,a=void 0;try{for(var n,i=this.params[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value;o.name&&(e[o.name]=o.value)}}catch(c){r=!0,a=c}finally{try{t||null==i.return||i.return()}finally{if(r)throw a}}return e.perPage=50,e.page=1,e}}]),e}(),n=Object(Y.a)(a.prototype,"events",[T.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=Object(Y.a)(a.prototype,"grupedEvents",[T.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),o=Object(Y.a)(a.prototype,"processedEvents",[T.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=Object(Y.a)(a.prototype,"params",[T.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{name:"after",value:"2020-7-31"}]}}),s=Object(Y.a)(a.prototype,"addParam",[T.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.params.push({name:"",value:""})}}}),u=Object(Y.a)(a.prototype,"removeParam",[T.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.params.splice(t,1)}}}),l=Object(Y.a)(a.prototype,"setParamName",[T.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,r){e.params[r].name=t}}}),b=Object(Y.a)(a.prototype,"setParamValue",[T.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,r){e.params[r].value=t}}}),p=Object(Y.a)(a.prototype,"getEvents",[T.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(L.a)(N.a.mark(function t(){var r;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.loadEvents();case 3:r=t.sent,Object(T.g)(function(){e.events=r}),e.processEvents(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}))}}),m=Object(Y.a)(a.prototype,"processEvents",[T.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t={},r=Object(q.a)(e.events,function(e){return e.created_at.split("T")[0]});for(var a in r){t[a]=[];for(var n=0;n<r[a].length;n++)t[a].push(r[a][n])}Object(T.g)(function(){e.grupedEvents=t})}}}),a),H=r(266),K=(f=function e(t){var r=this;Object(I.a)(this,e),this.rootStore=void 0,Object(G.a)(this,"token",h,this),Object(G.a)(this,"api",v,this),Object(G.a)(this,"setToken",j,this),Object(G.a)(this,"createApi",O,this),this.rootStore=t,Object(T.f)(function(){return r.token},function(e){e?window.localStorage.setItem("token",e):window.localStorage.removeItem("token")})},h=Object(Y.a)(f.prototype,"token",[T.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return window.localStorage.getItem("token")}}),v=Object(Y.a)(f.prototype,"api",[T.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=Object(Y.a)(f.prototype,"setToken",[T.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.token=t}}}),O=Object(Y.a)(f.prototype,"createApi",[T.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(L.a)(N.a.mark(function t(){return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.api=new H.Gitlab({host:"https://gitlab.webix.de/",token:e.token});case 1:case"end":return t.stop()}},t)}))}}),f),M=(g=function e(t){Object(I.a)(this,e),this.rootStore=void 0,Object(G.a)(this,"user",w,this),Object(G.a)(this,"err",d,this),Object(G.a)(this,"getUser",E,this),this.rootStore=t},w=Object(Y.a)(g.prototype,"user",[T.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=Object(Y.a)(g.prototype,"err",[T.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=Object(Y.a)(g.prototype,"getUser",[T.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(L.a)(N.a.mark(function t(){var r;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.rootStore.apiStore.api.Users.current();case 3:r=t.sent,Object(T.g)(function(){e.user=r,e.err=null}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),Object(T.g)(function(){e.user=null,e.err="Token is not valid"}),console.log(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,7]])}))}}),g),Q=r(267),R=r.n(Q),W=(y=function e(t){Object(I.a)(this,e),this.rootStore=void 0,Object(G.a)(this,"jira",k,this),Object(G.a)(this,"username",S,this),Object(G.a)(this,"password",x,this),Object(G.a)(this,"createJira",z,this),Object(G.a)(this,"setUsername",P,this),Object(G.a)(this,"setPassword",C,this),this.rootStore=t},k=Object(Y.a)(y.prototype,"jira",[T.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=Object(Y.a)(y.prototype,"username",[T.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),x=Object(Y.a)(y.prototype,"password",[T.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),z=Object(Y.a)(y.prototype,"createJira",[T.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(L.a)(N.a.mark(function t(){return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.jira=new R.a({protocol:"https",host:"jira.smart-digital.de",username:e.username,password:e.password,apiVersion:"2",strictSSL:!1});case 1:case"end":return t.stop()}},t)}))}}),P=Object(Y.a)(y.prototype,"setUsername",[T.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.username=t}}}),C=Object(Y.a)(y.prototype,"setPassword",[T.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.password=t}}}),y);Object(T.c)({enforceActions:"always"});var X=Object(U.createContext)(new function e(){Object(I.a)(this,e),this.eventStore=void 0,this.apiStore=void 0,this.userStore=void 0,this.jiraStore=void 0,this.eventStore=new D(this),this.apiStore=new K(this),this.userStore=new M(this),this.jiraStore=new W(this)}),Z=r(670),$=r(668),ee=r(671),te=Object(Z.a)(function(){var e=Object(U.useContext)(X),t=e.apiStore,r=t.setToken,a=t.createApi,n=e.userStore,i=n.getUser,o=n.err;return J.a.createElement(J.a.Fragment,null,J.a.createElement($.a,{icon:"key",iconPosition:"left",placeholder:"Your token",onChange:function(e){return r(e.target.value)},action:{icon:"check",onClick:function(){a(),i()}}}),o&&J.a.createElement(ee.a,{negative:!0},J.a.createElement("p",null,o)))}),re=Object(Z.a)(function(){var e=Object(U.useContext)(X).userStore.user;return J.a.createElement(J.a.Fragment,null,e&&e.name)}),ae=r(669),ne=r(660),ie=Object(Z.a)(function(){var e=Object(U.useContext)(X),t=e.userStore.user,r=e.eventStore,a=r.params,n=r.setParamName,i=r.setParamValue,o=r.addParam,c=r.getEvents,s=r.processEvents;return J.a.createElement(J.a.Fragment,null,J.a.createElement(ae.a,null,J.a.createElement(ae.a.Item,null,a.map(function(e,t){return J.a.createElement("div",{key:t},J.a.createElement($.a,{placeholder:"prop name",value:e.name,onChange:function(e){return n(e.target.value,t)}}),J.a.createElement($.a,{placeholder:"prop value",value:e.value,onChange:function(e){return i(e.target.value,t)}}))})),J.a.createElement(ae.a.Item,null,J.a.createElement(ne.a,{onClick:o},"Add Param"),t&&J.a.createElement(ne.a,{onClick:c},"Submite"),J.a.createElement(ne.a,{onClick:s},"Process"))))}),oe=Object(Z.a)(function(){var e=Object(U.useContext)(X).eventStore,t=e.events,r=e.grupedEvents,a=function(e,t){if(null!==t&&"author"!==e&&"author_username"!==e&&"author_id"!==e&&"commit_count"!==e&&"commit_from"!==e&&"commit_to"!==e)return t};return J.a.createElement(J.a.Fragment,null,t&&Object.keys(r).map(function(e,t){return J.a.createElement("div",{key:t},J.a.createElement("h4",null,e),r[e].map(function(e,t){return J.a.createElement("div",{key:t},J.a.createElement("pre",null,JSON.stringify(e,a,4)))}))}))}),ce=Object(Z.a)(function(){var e=Object(U.useContext)(X).jiraStore,t=e.setUsername,r=e.setPassword,a=e.createJira;return J.a.createElement(J.a.Fragment,null,J.a.createElement($.a,{icon:"user",iconPosition:"left",placeholder:"Username",onChange:function(e){return t(e.target.value)}}),J.a.createElement($.a,{icon:"key",iconPosition:"left",placeholder:"Password",type:"password",onChange:function(e){return r(e.target.value)}}),J.a.createElement(ne.a,{onClick:a},"Login"))}),se=function(){var e=Object(U.useContext)(X),t=e.apiStore,r=t.token,a=t.createApi,n=e.userStore.getUser;return Object(U.useEffect)(function(){r&&(console.log(r),a(),n())},[n,a,r]),J.a.createElement(J.a.Fragment,null,J.a.createElement("h3",null,"GitLab User Token:"),J.a.createElement(te,null),J.a.createElement("h3",null,"Jira User:"),J.a.createElement(ce,null),J.a.createElement("h3",null,"User:"),J.a.createElement(re,null),J.a.createElement("h3",null,"Event filter:"),J.a.createElement(ie,null),J.a.createElement("h3",null,"Events:"),J.a.createElement(oe,null))};r(658);F.a.render(J.a.createElement(se,null),document.getElementById("root"))}},[[287,1,2]]]);
//# sourceMappingURL=main.52db6758.chunk.js.map